{% extends 'alstom/index.html.twig' %}

{% block body %}

    <div id="modal-content-form-equipement-edit">
        <button aria-label="Close" class="close" data-dismiss="modal" id="close-modal-form-equipment-edit" style="color:red; position:absolute; right:20px; margin-top:-10px;" type="button">
            <span aria-hidden="true">&times;</span>
        </button>
        <div class="form-equipment" id="formulaire-equipment">
            {{ form_start(form_equipement, { 
               'attr': {'id': 'form_equipement_edit_instance'}}) }}
            {{form_row(form_equipement.Type)}}
            {{form_row(form_equipement.sous_type)}}
            {{form_row(form_equipement.DTR_board)}}
            {{form_row(form_equipement.Indice_DTR)}}
            {{form_row(form_equipement.Num_serie)}}
            {{form_row(form_equipement._token)}}

            <p><input class="btn-valid-Equipment" id="soumission-equipement-edit" name="soumission_edit_equipement" type="submit" value="Update"/></p>

            {{form_end(form_equipement)}}</div>

    </div>

    <div class="spinner-border text-info wait-spinner" id="wait-spinner" role="status">
        <span class="sr-only">
            Loading...
        </span>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="modal-form-version" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header card-header-title">
                    <h4 class="modal-title card-element-title">Add version logiciel</h4>
                    <button aria-label="Close" class="close" data-dismiss="modal" id="close-modal-form-version" style="color:red; position:absolute; right:20px; margin-top:-10px;" type="button">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="card-content clearfix">
                        <div class="form-version" id="formulaire-version">
                            {{ form_start(form_version, {'action': path('alstom.addVersion'), 
               'attr': {'id': 'form_version'}}) }}
                            {{form_row(form_version.release_note)}}
                            <input class="btn-valid-version btn btn-secondary " id="soumission-version" name="soumission_version" type="submit" value="Add"/>
                            {{form_end(form_version)}}
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
    {# --------------------------- #}
    <main class="col-md-12 col-lg-12 pl-5 px-4 main-baseline-train" role="main">
        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">

            <h1>{{baseline.name}}</h1>
            <div class="content-btn-add-config">
                <button class="btn btn-primary" id="add-configLogiciel">Add Configuration Logiciel</button>
                {% if (baseline.VersionLogiciel) %}
                    <button class="btn btn-secondary" data-target="#modal-form-version" data-toggle="modal" id="add-versionLogiciel">Edit Version Logiciel</button>
                {% else %}
                    <button class="btn btn-primary" data-target="#modal-form-version" data-toggle="modal" id="add-versionLogiciel">Add Version Logiciel</button>
                {% endif %}
            </div>

        </div>


        <div class="content-equipments-plug row">

            <div class="show-equipment col-lg-7 row" id="show-equipment" style="">

                <div class="col-xl-6 col-md-6 mt-4">
                    <div class="card card-stats card-equipment">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-5" style="font-size:2em;display:flex; justify-content:space-around;font-weight:bold">
                                    <div class="icon-big text-center">
                                        <div class="icon-warning">
                                            <i class="fas fa-server"></i>
                                        </div>
                                    </div>
                                </div>
                                <h4 class="card-title">{{evc.type.name}}</h4>
                            </div>
                        </div>
                        <div class="card-footer"><hr>
                            <div class="stats">
                                <span style="display:flex; justify-content:space-around;">
                                    <p class="col-md-4">DTR</p>
                                    <p class="col-md-4">Indice</p>
                                    <p class="col-md-4">N°</p>
                                </span>
                                <i class="fa fa-refresh"></i>
                                <span style="display:flex; justify-content:space-around;font-weight:bold">
                                    <p>{{evc.DTRboard}}</p>
                                    <p>{{evc.IndiceDTR}}</p>
                                    <p>{{evc.Numserie}}</p>
                                </span>
                            </div>
                            <p class="edit-delete-equipement">
                                <a class="edit-{{evc.id}}" id="edit-equipement-{{evc.id}}">
                                    <i class="fas fa-edit"></i>
                                </a>
                                <a id="delete-">
                                    <i class="fas fa-trash-alt poubelle"></i>
                                </a>
                            </p>
                        </div>
                        <div class="col-12">
                            <div class="numbers">
                                {% for card in cards %}
                                    <div class="card-card 1 col-md-6 mt-4 mb-4">
                                        <div class="card_title title-white">
                                            <p>{{card.sousType.name}}</p>
                                        </div>
                                        <span class="mt-4" style="display:flex; justify-content:space-around;">
                                            <p class="col-md-4">DTR</p>
                                            <p class="col-md-4">Indice</p>
                                            <p class="col-md-4">N°</p>

                                        </span>
                                        <span class="description-card">
                                            <p>{{card.DTRboard}}</p>
                                            <p>{{card.IndiceDTR}}</p>
                                            <p>{{card.Numserie}}</p>
                                        </span>
                                        <p class="edit-delete-equipement edit-card">
                                            <a class="edit-{{card.id}}" id="edit-equipement-{{card.id}}">
                                                <i class="fas fa-edit"></i>
                                            </a>
                                            <a id="delete-">
                                                <i class="fas fa-trash-alt poubelle"></i>
                                            </a>
                                        </p>
                                    </div>

                                {% endfor %}

                            </div>
                        </div>

                    </div>
                </div>

                {% for equipement in equipements %}
                    {% if equipement.status == true %}
                        <div class="col-xl-6 col-md-6 mt-4">
                            <div class="card card-stats card-equipment">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-5" style="font-size:2em;display:flex; justify-content:space-around;font-weight:bold">
                                            <div class="icon-big text-center">
                                                <div class="icon-warning">
                                                    <i class="fas fa-server"></i>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-7">
                                            <div class="numbers">
                                                <div>
                                                    <h4 class="card-title">{{equipement.Type.name}}</h4>
                                                    <p class="card-category">
                                                        {% if equipement.SousType %}
                                                            {{equipement.SousType.name}}
                                                        {% endif %}
                                                    </p>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer"><hr>
                                    <div class="stats">
                                        <div>
                                            <span style="display:flex; justify-content:space-around;">
                                                <p class="col-md-4">DTR</p>
                                                <p class="col-md-4">Indice</p>
                                                <p class="col-md-4">N°</p>
                                            </span>
                                            <i class="fa fa-refresh"></i>
                                            <span style="display:flex; justify-content:space-around;font-weight:bold">
                                                <p>{{equipement.DTRboard}}</p>
                                                <p>{{equipement.IndiceDTR}}</p>
                                                <p>{{equipement.Numserie}}</p>
                                            </span>
                                        </div>
                                        <p class="edit-delete-equipement">
                                            <a class="edit-{{equipement.id}}" id="edit-equipement-{{equipement.id}}">
                                                <i class="fas fa-edit"></i>
                                            </a>
                                            <a id="delete-">
                                                <i class="fas fa-trash-alt poubelle"></i>
                                            </a>
                                        </p>

                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
            <div class="col-lg-5 content-form-plug-version row mt-3">

                <div class="content-version-ERTMS col-lg-12">
                    {% for ertms in baseline.ERTMS %}
                        {% if ertms.status %}
                            <h3 id="title-version">Version ERTMS</h3>
                            {{ ertms.solution.name }}
                        {% endif %}
                    {% endfor %}
                    <div class="content-version-config">
                        {% if (baseline.VersionLogiciel) %}
                            <h3 id="title-version">Software Version</h3>
                            {{ baseline.VersionLogiciel.ReleaseNote}}
                        {% else %}
                            <h3 id="title-version"></h3>
                        {% endif %}
                    </div>

                </div>
                <div class="content-form-plug col-lg-12">
                    <h3>Add plug</h3>
                    <button class="btn-shadow d-inline-flex align-items-center btn btn-success" data-target="#modal-form-plug" data-toggle="modal" type="button">
                        <fa _nghost-c2="" class="mr-2" name="plus">
                            <i _ngcontent-c2="" aria-hidden="true" class="fa fa-plus"></i>
                        </fa>
                        Add New
                    </button>
                    <div class="content-plug-file" id="content-plug-file"></div>
                </div>
            </div>
        </div>
    </main>
    <!-- Modal -->
    <div class="modal fade" id="modal-form-plug" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header card-header-title">
                    <h4 class="modal-title card-element-title">Add plug
                    </h4>
                    <button aria-label="Close" class="close" data-dismiss="modal" id="close-modal-form-plug" style="color:red; position:absolute; right:20px; margin-top:-10px;" type="button">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="card-content clearfix">
                        <div class="upload-done" id="upload-done"></div>
                        <div class="content-name-drag-plug row">
                            <div class="name-plug col-md-6">
                                <form action="" class="form-name-plug" id="form-name-plug">
                                    <div class="form-group">
                                        <label for="input-name-plug">Type of plug</label>
                                        <input class="form-control" id="input-name-plug" placeholder="" type="text">
                                    </div>
                                    <input class="btn btn-success" id="valid-plug" type="submit" value="Add">
                                </form>
                            </div>
                            <form class="box has-advanced-upload col-md-6" enctype="multipart/form-data" method="post" novalidate="">
                                <div class="box__input">
                                    <svg class="box__icon" height="43" viewbox="0 0 50 43" width="50" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M48.4 26.5c-.9 0-1.7.7-1.7 1.7v11.6h-43.3v-11.6c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v13.2c0 .9.7 1.7 1.7 1.7h46.7c.9 0 1.7-.7 1.7-1.7v-13.2c0-1-.7-1.7-1.7-1.7zm-24.5 6.1c.3.3.8.5 1.2.5.4 0 .9-.2 1.2-.5l10-11.6c.7-.7.7-1.7 0-2.4s-1.7-.7-2.4 0l-7.1 8.3v-25.3c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v25.3l-7.1-8.3c-.7-.7-1.7-.7-2.4 0s-.7 1.7 0 2.4l10 11.6z"></path>
                                    </svg>
                                    <input class="box__file" data-multiple-caption="{count} files selected" id="file" multiple="" name="files[]" type="file">
                                    <label class="label-test" for="file">
                                        <strong>Choose a file</strong>
                                        <span class="box__dragndrop">
                                            or drag it here</span>.</label>
                                    <button class="box__button" type="submit">Upload</button>
                                </div>
                                <div class="box__uploading">
                                    <div class="ldBar label-center" data-preset="bubble" id="test-progress"></div>
                                </div>
                                <div class="box__success">Done!</div>
                                <div class="box__error">Error!<span></span>.<a class="box__restart" role="button">Try again!</a>
                                </div>
                                <input name="ajax" type="hidden" value="1">
                            </form>
                        </div>

                    </div>
                    <div class="border-separate"></div>
                    <div class="btn btn-success btn-shadow mt-4" id="valid-all-plug">Valid</div>
                </div>
            </div>
        </div>


    {% endblock %}
